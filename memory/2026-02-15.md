# 2026-02-15 — Add `convert` command (Markdown to CSV)

## Summary

Added a new `convert` CLI command that converts the bookmarks markdown file to CSV format for use in spreadsheets, databases, and data analysis tools.

## Changes

### New files
- `src/twitter_bookmarks/converter.py` — `bookmarks_to_csv()` function with 13 CSV columns, pipe-separated multi-value fields, proper quoting
- `tests/test_converter.py` — 16 tests covering headers, fields, multi-values, booleans, newlines, commas, file output

### Modified files
- `src/twitter_bookmarks/markdown.py` — Added `parse_markdown_to_bookmarks()` state machine parser (inverse of `render_bookmarks_file()`)
- `src/twitter_bookmarks/cli.py` — Added `convert` command (positional input file, optional `-o` output, status to stderr)
- `tests/test_markdown.py` — Added `TestParseMarkdownToBookmarks` with 13 tests (round-trip, edge cases, lossy fields)
- `tests/test_cli.py` — Added `TestConvertCommand` with 5 tests (output file, stdout, errors, stderr)
- `README.md` — Documented the `convert` command
- `ARCHITECTURE.md` — Added converter module and convert data flow

## Key design decisions
- Markdown parser is a line-by-line state machine mirroring the JS viewer's parser
- CSV uses pipe `|` separator for multi-value fields (links, media) to avoid CSV comma conflicts
- Status messages go to stderr so CSV output can be cleanly piped
- No auth/config required — pure local file operation
